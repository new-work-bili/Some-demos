
# **id_T不需要变；id由后端生成，上传附件附带作业id**
# 是否要完善的功能：
+	被打回的作业，是否发邮件提醒学生？  是否在学生那边的作业标记 _已被打回_ ？
# 权限
+	后端做登陆接口拦截，判断
	1.	属于学生权限的接口:带 _S 的
	2.	属于老师权限的接口：带 _T 的
	3.	公用接口：/login/  
+	cookie:
	1.	使用http-only、那么每次后台返回数据都要加上{name:'',account:'',status:'Students/Teache'}
	2.	若不使用http-only，那么前端会自己到cookie中获取数据。但不安全，面临XSS攻击；**推荐，因为使用了签名导致cookie的value在一定程度上加密，获取也很困难**
	3.	再或者，前端每个需要身份验证的地方都在单独发起一个请求
+	学生和老师都以账号为标记
+	
# 接口
## 通用,统一附带
1.	成功{code:1};	失败{code:0,msg:'失败信息'}
2.	cookie中的信息：	(身份？名字、学号/工号)
```
	{status:'Teache or  Students ',name:'刘鹏鹏',account:'2017105110134'}
```
## 登陆：/login/															------前端已完成
+	发送：{account:"",password: "",status:""};//账号密码,status:"学生"  or  "老师"
+	返回：
	**通用,统一附带的那些**
## 学生-主页面-获取该学生所有作业信息:	/getTableData_S/					------前端已完成
~~{account:''}//账号~~ --> 不需要发送，通过cookie获取身份信息
+	返回：
+	**注意顺序：**
	1.	newItemData中待提交的在前面，待批阅的在后面；在此基础上新的(日期)再前面，旧的在后面
	2.	oldItemData就是按时间排序，新的再前面，旧的在后面
```{
	newItemData: [ //待提交的数据
		{
			status: "Student", //这个是学生显示的书籍格式
			title: "作业1",
			className: "网络安全",
			state: "待提交",
			startTime: "2020-09-01",
			endTime: "2020-10-05",
			id: '10003' 
		},],
		oldItemData: [{//已结束的数据
			status: "Student", //这个是学生显示的书籍格式
			title: "作业1",
			className: "网络安全",
			state: "已结束",
			startTime: "2020-09-01",
			endTime: "2020-10-05",
			id: '10004' 
		}, ],
		gongGao:[	//公告信息
			{
				className:'网络工程',		//课程
				teacheName:'石晓丽',			//老师
				date:'2020-12-05 14:23',	//发送的时间
				value:'test'				//公告内容
			}
			
		]
}
	
```
## 学生-作业提交页面-获取信息：/getWorkItem_S/								------前端已完成
+	发送：{id:00000}  //作业id
+	返回：{
			formData:{
				title: "作业名1",
				className: '网络技术', //作业所属课程
				workValue: '要求要求这是一种个.....那我....', //作业要求
				startTime: "",
				endTime: "",
				score: null, //作业得分，只有在老师批改之后才会有1-5，否则是null
				value: '', //作业内容
				downFileUrl:'',		//附件下载链接,没有就写null
				id:
			}
					
		}
		
##	学生-作业提交页面-上传文件：	/upload_S/ **待定**
+	发送：{id:00000,data:{}}  //作业id
+	返回：
		**通用,统一附带的那些**
		
##	学生-作业提交页面-下载文件：	**待定**
##	学生-作业提交页面-提交作业：	/sendWork_S/							------前端已完成
+	发送：{value:'作业内容,学生填写的'}


##  老师-主页面-获取对应班级的作业：/getWorkData_T/						------前端已完成

+	返回：
+	**注意顺序：**
	1.	itemData中进行中的在前面，已结束的在后面；在此基础上新的(日期)再前面，旧的在后面
```	
{
		className: ["计科一班", "计科二班"],//该老师负责的班级
		showClass:'计科一班',//如果有很多班级时，只显示某一个班级的作业信息；这里写的就是显示的哪一个班级的信息
		itemData: [{	//showClass对应班级的作业信息;**注意排序，进行中在前，已结束在后面**
			status: "Teache", //这个是老师显示的书籍格式
			title: "作业1",
			compli: [55, 60],//完成情况
			state: "进行中",
			startTime: "2020-09-01",
			endTime: "2020-10-05",
			id: "100034", //作业id，可以是时间戳
			id_T:'4566545',	//id，老师派发作业的时候的时间戳
			value: '作业内容', //作业内容，
			
		}, ],
	}
```

##  老师-主页面-改变表单选择框时获取对应班级的作业：/getWorkDataChange_T/	------前端已完成
+	{className:'计科一班'}//班级信息
+	返回:和/getWorkData_T/效果一样：就是只返回对应班级的数据就行了
	{
		itemData: [{
			status: "Teache", //这个是老师显示的书籍格式
			title: "作业1",
			compli: [55, 60],//完成情况
			state: "进行中",
			startTime: "2020-09-01",
			endTime: "2020-10-05",
			id: "100034", //作业id，可以是时间戳
			value: '作业内容', //作业内容，
		}, ],
	}
##  老师-主页面-发布作业：/sendWork_T/									------前端已完成
+	发送：{			title: '', //作业名	
					date: '', //开始、截止时间;			如:["2020-10-27","2020-10-30"]
					className: [], //派发给对应的班级名	如:["计科一班","计科二班"]
					workValue: '' //作业要求
					id_T：''
					}
+	返回：		
		**通用,统一附带的那些**
		

## 老师-主页面-发布公告：/sendGongGao_T/									------前端已完成
+	
	{
		className: [], //派发给对应的班级名	如:["计科一班","计科二班"]
		Value:''		//公告内容
		date:''			//发送时间，如："2020-12-05 14:27"
	}
+	返回：		
		**通用,统一附带的那些**
##  老师-主页面-编辑/修改作业：/editWokr_T/								------前端已完成
+	发送：
	{				
		id_T:'',		//老师派发作业的时候的时间戳
		title: '', //作业名
		date: '', //开始、截止时间;			如:["2020-10-27","2020-10-30"]
		className: [], //派发给对应的班级名	如:["计科一班","计科二班"]
		workValue: '' //作业要求
	}
	
+	返回：		
	**通用,统一附带的那些**



##  老师-班级内学生作业列表-获取列表信息：/getTableData_T/			------前端已完成
+	发送：
{
	id_T:'',
	className:'计科一班'
}
+	返回：
```
	{
		tableData: [{ 
				date: '2016-05-03',//提交日期
				name: '王小虎',//学生名
				status: '未提交',//作业状态
				number: '2017105110134',//学号
				id: '1004'//对应作业id
			}, {
				date: '2016-05-03',
				name: '王小虎',
				status: '待批改',
				number: '2017105110134',
				id: '1005'
			},]
	}
```
##  老师-班级内学生作业列表-打回作业：/fallBack_T/		----前端已完成
+	发送		{data:[001,003]}  //是一个数组，里面是要打回的作业的id
+	返回		**通用,统一附带的那些**
	**被打回的作业作态在学生那边变成待提交**			
## 老师-批阅页面-打分：/setFenshu_T/					----前端已完成
+	发送		{id:'001',score:0}//score是分数，范围1-5	
+	返回		**通用,统一附带的那些**
## 老师-批阅页面-获取作业数据 /getWorkItem_T/			------未确定？
+	发送		{id:'001'}//
+	返回
```
	{
		formData:{
			title: '作业名1',
			name: '刘鹏鹏', //学生姓名
			workValue: '要求要求这是一种个.....那我....', //作业要求
			value: 'd当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.leng当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.leng当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.leng当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.leng当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.lengddd', //作业内容
			score: null,		//打分；只有在老师批改之后才会有1-5，否则是null
			downFileUrl:''		//附件下载链接
			id:''				//作业id
		}
	}
```





# 数据库
1.	每个作业的属性；(上传的文件算不算？)
```
	{
		status: "Student", //根据接口变化，不计入数据库
		title: "作业1",
		name: '刘鹏鹏', //这个作业是谁写的
		className: "网络安全",//所属课程
		state: "待提交",
		startTime: "2020-09-01",
		endTime: "2020-10-05",
		id: '10003' ,//作业id，学生提交时的时间戳
		id_T:'4566545',	//id，老师派发作业的时候的时间戳
		score: null, //作业得分，只有在老师审批之后才会有:1-5，否则是null
		workValue: '要求要求这是一种个.....那我....', //作业要求
		value: '', //作业内容,学生填写的
	}
```
2.	
+	作业状态
	学生：待提交、待批阅、已结束
	老师：已结束、进行中